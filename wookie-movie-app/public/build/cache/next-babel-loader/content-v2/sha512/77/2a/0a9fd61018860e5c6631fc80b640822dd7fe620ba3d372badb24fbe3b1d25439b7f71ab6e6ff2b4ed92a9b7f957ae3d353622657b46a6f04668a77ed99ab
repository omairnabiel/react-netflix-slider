{"ast":null,"code":"import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { useRecoilState } from \"recoil\";\nimport { debounce } from \"lodash\"; // state atoms\n\nimport { moviesState } from \"../../state/atoms/movie\"; // service\n\nimport { MovieService } from \"../../service/movie.service\";\nexport default function SearchInput() {\n  const [value, setValue] = useState(\"\");\n  const [movies, setMovies] = useRecoilState(moviesState); // debounce getMovies, to avoid calling the api on each input\n\n  const getMoviesDebounced = useRef(debounce(getMovies, 1000)).current;\n\n  async function getMovies(searchTerm) {\n    setMovies({\n      data: [],\n      loading: true,\n      error: undefined\n    });\n    const data = await MovieService.get(searchTerm);\n    setMovies({\n      data,\n      loading: false,\n      error: undefined\n    });\n  }\n\n  useEffect(() => {\n    setMovies({\n      data: [],\n      loading: true,\n      error: undefined\n    });\n    getMoviesDebounced(value);\n  }, [value]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative flex w-full flex-wrap items-stretch mb-3\"\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search Movies\",\n    className: \"px-3 py-3 placeholder-gray-400 text-gray-700 relative bg-white bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full pr-10\",\n    value: value,\n    onChange: e => {\n      setValue(e.target.value);\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"z-10 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent rounded text-base items-center justify-center w-8 right-0 pr-3 py-3\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-user\"\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faSearch\n  }))));\n}","map":null,"metadata":{},"sourceType":"module"}